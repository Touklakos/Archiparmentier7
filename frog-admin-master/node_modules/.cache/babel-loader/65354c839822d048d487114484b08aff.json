{"remainingRequest":"C:\\Users\\Jack Goodenough\\Documents\\ARCHI\\Archiparmentier7\\frog-admin-master\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Jack Goodenough\\Documents\\ARCHI\\Archiparmentier7\\frog-admin-master\\src\\router\\index.js","dependencies":[{"path":"C:\\Users\\Jack Goodenough\\Documents\\ARCHI\\Archiparmentier7\\frog-admin-master\\src\\router\\index.js","mtime":1585055118302},{"path":"C:\\Users\\Jack Goodenough\\Documents\\ARCHI\\Archiparmentier7\\frog-admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Jack Goodenough\\Documents\\ARCHI\\Archiparmentier7\\frog-admin-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.regexp.split\";\nimport _toConsumableArray from \"C:\\\\Users\\\\Jack Goodenough\\\\Documents\\\\ARCHI\\\\Archiparmentier7\\\\frog-admin-master\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\n\nfunction _createForOfIteratorHelper(o) { if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (o = _unsupportedIterableToArray(o))) { var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var it, normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(n); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport Vue from 'vue';\nimport Router from 'vue-router';\nimport fullRoutes from \"./fullRoutes\";\nimport store from '@/store';\nVue.use(Router);\nexport function initRoutes(routes) {\n  return new Router({\n    routes: routes\n  });\n}\nexport function cleanRouter(route) {\n  route.matcher = new Router([]).matcher; // reset router\n}\nexport function routeEureka(paths, routes) {\n  var tempPaths = _toConsumableArray(paths);\n\n  var index = indexOfPath(tempPaths.shift(), routes);\n\n  if (index < 0) {\n    return false;\n  } else if (tempPaths.length !== 0) {\n    return routeEureka(tempPaths, routes[index].children);\n  } else {\n    return true;\n  }\n}\nexport function indexOfPath(path, routes) {\n  var routeArr = [];\n\n  var _iterator = _createForOfIteratorHelper(routes),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var route = _step.value;\n      routeArr.push(route.path);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return routeArr.indexOf(path);\n}\nexport function pathToArray(path) {\n  var arr = path.split('/');\n  arr.splice(0, 1);\n\n  if (arr[0] === '') {\n    return ['/'];\n  } else {\n    arr[0] = '/' + arr[0];\n  }\n\n  return arr;\n} // export const fullRouter = fullRoutes.concat(dynamicRoutes);\n\nexport var fullRouter = fullRoutes;\n\nvar _router = initRoutes(fullRouter);\n\n_router.beforeEach(function (to, from, next) {\n  console.log(to);\n\n  if (to.matched.length > 0) {\n    next();\n  } else {\n    var pathArray = pathToArray(to.path);\n\n    if (!routeEureka(pathArray, fullRouter)) {\n      next('/error/404');\n    } else if (!routeEureka(pathArray, store.state.permission.permittedRoutes)) {\n      next('/error/403');\n    }\n  }\n});\n\nexport default _router;",{"version":3,"sources":["C:/Users/Jack Goodenough/Documents/ARCHI/Archiparmentier7/frog-admin-master/src/router/index.js"],"names":["Vue","Router","fullRoutes","store","use","initRoutes","routes","cleanRouter","route","matcher","routeEureka","paths","tempPaths","index","indexOfPath","shift","length","children","path","routeArr","push","indexOf","pathToArray","arr","split","splice","fullRouter","_router","beforeEach","to","from","next","console","log","matched","pathArray","state","permission","permittedRoutes"],"mappings":";;;;;;;;;;;;;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,OAAOC,UAAP;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEAH,GAAG,CAACI,GAAJ,CAAQH,MAAR;AAEA,OAAO,SAASI,UAAT,CAAoBC,MAApB,EAA4B;AAClC,SAAO,IAAIL,MAAJ,CAAW;AACjBK,IAAAA,MAAM,EAAEA;AADS,GAAX,CAAP;AAGA;AAED,OAAO,SAASC,WAAT,CAAqBC,KAArB,EAA4B;AAClCA,EAAAA,KAAK,CAACC,OAAN,GAAgB,IAAIR,MAAJ,CAAW,EAAX,EAAeQ,OAA/B,CADkC,CACM;AACxC;AAED,OAAO,SAASC,WAAT,CAAqBC,KAArB,EAA4BL,MAA5B,EAAoC;AAC1C,MAAIM,SAAS,sBAAOD,KAAP,CAAb;;AACA,MAAIE,KAAK,GAAGC,WAAW,CAACF,SAAS,CAACG,KAAV,EAAD,EAAoBT,MAApB,CAAvB;;AACA,MAAIO,KAAK,GAAG,CAAZ,EAAe;AACd,WAAO,KAAP;AACA,GAFD,MAEO,IAAID,SAAS,CAACI,MAAV,KAAqB,CAAzB,EAA4B;AAClC,WAAON,WAAW,CAACE,SAAD,EAAYN,MAAM,CAACO,KAAD,CAAN,CAAcI,QAA1B,CAAlB;AACA,GAFM,MAEA;AACN,WAAO,IAAP;AACA;AACD;AAED,OAAO,SAASH,WAAT,CAAqBI,IAArB,EAA2BZ,MAA3B,EAAmC;AACzC,MAAIa,QAAQ,GAAG,EAAf;;AADyC,6CAEvBb,MAFuB;AAAA;;AAAA;AAEzC,wDAA0B;AAAA,UAAjBE,KAAiB;AACzBW,MAAAA,QAAQ,CAACC,IAAT,CAAcZ,KAAK,CAACU,IAApB;AACA;AAJwC;AAAA;AAAA;AAAA;AAAA;;AAKzC,SAAOC,QAAQ,CAACE,OAAT,CAAiBH,IAAjB,CAAP;AACA;AAED,OAAO,SAASI,WAAT,CAAqBJ,IAArB,EAA2B;AACjC,MAAIK,GAAG,GAAGL,IAAI,CAACM,KAAL,CAAW,GAAX,CAAV;AACAD,EAAAA,GAAG,CAACE,MAAJ,CAAW,CAAX,EAAc,CAAd;;AACA,MAAIF,GAAG,CAAC,CAAD,CAAH,KAAW,EAAf,EAAmB;AAClB,WAAO,CAAC,GAAD,CAAP;AACA,GAFD,MAEO;AACNA,IAAAA,GAAG,CAAC,CAAD,CAAH,GAAS,MAAMA,GAAG,CAAC,CAAD,CAAlB;AACA;;AACD,SAAOA,GAAP;AACA,C,CAED;;AACA,OAAO,IAAMG,UAAU,GAAGxB,UAAnB;;AAEP,IAAMyB,OAAO,GAAGtB,UAAU,CAACqB,UAAD,CAA1B;;AAEAC,OAAO,CAACC,UAAR,CAAoB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACvCC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,EAAZ;;AACA,MAAIA,EAAE,CAACK,OAAH,CAAWlB,MAAX,GAAoB,CAAxB,EAA2B;AAC1Be,IAAAA,IAAI;AACJ,GAFD,MAEO;AACN,QAAII,SAAS,GAAGb,WAAW,CAACO,EAAE,CAACX,IAAJ,CAA3B;;AACA,QAAI,CAACR,WAAW,CAACyB,SAAD,EAAYT,UAAZ,CAAhB,EAAyC;AACxCK,MAAAA,IAAI,CAAC,YAAD,CAAJ;AACA,KAFD,MAEO,IAAI,CAACrB,WAAW,CAACyB,SAAD,EAAYhC,KAAK,CAACiC,KAAN,CAAYC,UAAZ,CAAuBC,eAAnC,CAAhB,EAAqE;AAC3EP,MAAAA,IAAI,CAAC,YAAD,CAAJ;AACA;AACD;AACD,CAZD;;AAaA,eAAeJ,OAAf","sourcesContent":["import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport fullRoutes from './fullRoutes'\r\nimport store from '@/store'\r\n\r\nVue.use(Router);\r\n\r\nexport function initRoutes(routes) {\r\n\treturn new Router({\r\n\t\troutes: routes,\r\n\t});\r\n}\r\n\r\nexport function cleanRouter(route) {\r\n\troute.matcher = new Router([]).matcher; // reset router\r\n}\r\n\r\nexport function routeEureka(paths, routes) {\r\n\tlet tempPaths = [...paths];\r\n\tlet index = indexOfPath(tempPaths.shift(), routes);\r\n\tif (index < 0) {\r\n\t\treturn false\r\n\t} else if (tempPaths.length !== 0) {\r\n\t\treturn routeEureka(tempPaths, routes[index].children)\r\n\t} else {\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\nexport function indexOfPath(path, routes) {\r\n\tlet routeArr = [];\r\n\tfor (let route of routes) {\r\n\t\trouteArr.push(route.path);\r\n\t}\r\n\treturn routeArr.indexOf(path);\r\n}\r\n\r\nexport function pathToArray(path) {\r\n\tlet arr = path.split('/');\r\n\tarr.splice(0, 1);\r\n\tif (arr[0] === '') {\r\n\t\treturn ['/']\r\n\t} else {\r\n\t\tarr[0] = '/' + arr[0];\r\n\t}\r\n\treturn arr;\r\n}\r\n\r\n// export const fullRouter = fullRoutes.concat(dynamicRoutes);\r\nexport const fullRouter = fullRoutes;\r\n\r\nconst _router = initRoutes(fullRouter);\r\n\r\n_router.beforeEach(((to, from, next) => {\r\n\tconsole.log(to);\r\n\tif (to.matched.length > 0) {\r\n\t\tnext();\r\n\t} else {\r\n\t\tlet pathArray = pathToArray(to.path);\r\n\t\tif (!routeEureka(pathArray, fullRouter)) {\r\n\t\t\tnext('/error/404')\r\n\t\t} else if (!routeEureka(pathArray, store.state.permission.permittedRoutes)) {\r\n\t\t\tnext('/error/403')\r\n\t\t}\r\n\t}\r\n}));\r\nexport default _router;\r\n"]}]}